<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>18&nbsp; Tables for Research – Empirical Finance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../data-analysis/quarto/index.html" rel="next">
<link href="../../data-analysis/visualization/index.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a074a9bc3144aa89f5d2a8631a82ff09.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script defer="" src="https://umami.vincentgregoire.com/script.js" data-website-id="5c0abb42-9e67-4889-8e30-295fe46e640b">
</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../data-analysis/visualization/index.html">Visualization and Research Output</a></li><li class="breadcrumb-item"><a href="../../data-analysis/tables/index.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tables for Research</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Empirical Finance</a> 
        <div class="sidebar-tools-main">
    <a href="../../Empirical-Finance.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About This Book</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/install/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installing Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/python-basics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Python Syntax</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/oop/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Object-Oriented Programming Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/code-quality/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Code Quality and Documentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/testing/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Error Handling and Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/logging/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Logging and Configuration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/tools/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Development Environment and Tools</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/git/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Version Control using Git and GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/ai-for-coding/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Using AI for Coding in Empirical Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/devcontainers/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Stay Safe with Devcontainers</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../data-analysis/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Working with Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/dataframes/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Introduction to DataFrames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/io/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Data Input and File Formats</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/cleaning/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/structuring/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Data Structuring and Aggregation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/reshaping/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Reshaping Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/joins/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Joins and Merges</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Visualization and Research Output</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/visualization/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/tables/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tables for Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-analysis/quarto/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reproducible Documents with Quarto</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">18.1</span> Introduction</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites"><span class="header-section-number">18.2</span> Prerequisites</a></li>
  <li><a href="#descriptive-statistics-tables" id="toc-descriptive-statistics-tables" class="nav-link" data-scroll-target="#descriptive-statistics-tables"><span class="header-section-number">18.3</span> Descriptive Statistics Tables</a>
  <ul class="collapse">
  <li><a href="#basic-summary-statistics-with-pandas" id="toc-basic-summary-statistics-with-pandas" class="nav-link" data-scroll-target="#basic-summary-statistics-with-pandas"><span class="header-section-number">18.3.1</span> Basic Summary Statistics with pandas</a></li>
  <li><a href="#customizing-summary-statistics" id="toc-customizing-summary-statistics" class="nav-link" data-scroll-target="#customizing-summary-statistics"><span class="header-section-number">18.3.2</span> Customizing Summary Statistics</a></li>
  <li><a href="#formatting-numbers-for-presentation" id="toc-formatting-numbers-for-presentation" class="nav-link" data-scroll-target="#formatting-numbers-for-presentation"><span class="header-section-number">18.3.3</span> Formatting Numbers for Presentation</a></li>
  <li><a href="#panel-data-summary-statistics" id="toc-panel-data-summary-statistics" class="nav-link" data-scroll-target="#panel-data-summary-statistics"><span class="header-section-number">18.3.4</span> Panel Data Summary Statistics</a></li>
  <li><a href="#comparing-groups-in-summary-statistics" id="toc-comparing-groups-in-summary-statistics" class="nav-link" data-scroll-target="#comparing-groups-in-summary-statistics"><span class="header-section-number">18.3.5</span> Comparing Groups in Summary Statistics</a></li>
  <li><a href="#adding-statistical-tests-to-summary-tables" id="toc-adding-statistical-tests-to-summary-tables" class="nav-link" data-scroll-target="#adding-statistical-tests-to-summary-tables"><span class="header-section-number">18.3.6</span> Adding Statistical Tests to Summary Tables</a></li>
  </ul></li>
  <li><a href="#regression-output-tables" id="toc-regression-output-tables" class="nav-link" data-scroll-target="#regression-output-tables"><span class="header-section-number">18.4</span> Regression Output Tables</a>
  <ul class="collapse">
  <li><a href="#basic-regression-with-statsmodels" id="toc-basic-regression-with-statsmodels" class="nav-link" data-scroll-target="#basic-regression-with-statsmodels"><span class="header-section-number">18.4.1</span> Basic Regression with statsmodels</a></li>
  <li><a href="#creating-a-basic-regression-table" id="toc-creating-a-basic-regression-table" class="nav-link" data-scroll-target="#creating-a-basic-regression-table"><span class="header-section-number">18.4.2</span> Creating a Basic Regression Table</a></li>
  <li><a href="#comparing-multiple-model-specifications" id="toc-comparing-multiple-model-specifications" class="nav-link" data-scroll-target="#comparing-multiple-model-specifications"><span class="header-section-number">18.4.3</span> Comparing Multiple Model Specifications</a></li>
  <li><a href="#using-stargazer-for-professional-tables" id="toc-using-stargazer-for-professional-tables" class="nav-link" data-scroll-target="#using-stargazer-for-professional-tables"><span class="header-section-number">18.4.4</span> Using stargazer for Professional Tables</a></li>
  <li><a href="#handling-clustered-standard-errors" id="toc-handling-clustered-standard-errors" class="nav-link" data-scroll-target="#handling-clustered-standard-errors"><span class="header-section-number">18.4.5</span> Handling Clustered Standard Errors</a></li>
  <li><a href="#formatting-model-fit-statistics" id="toc-formatting-model-fit-statistics" class="nav-link" data-scroll-target="#formatting-model-fit-statistics"><span class="header-section-number">18.4.6</span> Formatting Model Fit Statistics</a></li>
  </ul></li>
  <li><a href="#introduction-to-latex-tables" id="toc-introduction-to-latex-tables" class="nav-link" data-scroll-target="#introduction-to-latex-tables"><span class="header-section-number">18.5</span> Introduction to LaTeX Tables</a>
  <ul class="collapse">
  <li><a href="#understanding-latex-table-structure" id="toc-understanding-latex-table-structure" class="nav-link" data-scroll-target="#understanding-latex-table-structure"><span class="header-section-number">18.5.1</span> Understanding LaTeX Table Structure</a></li>
  <li><a href="#converting-pandas-dataframes-to-latex" id="toc-converting-pandas-dataframes-to-latex" class="nav-link" data-scroll-target="#converting-pandas-dataframes-to-latex"><span class="header-section-number">18.5.2</span> Converting pandas DataFrames to LaTeX</a></li>
  <li><a href="#customizing-latex-output" id="toc-customizing-latex-output" class="nav-link" data-scroll-target="#customizing-latex-output"><span class="header-section-number">18.5.3</span> Customizing LaTeX Output</a></li>
  <li><a href="#creating-regression-tables-in-latex" id="toc-creating-regression-tables-in-latex" class="nav-link" data-scroll-target="#creating-regression-tables-in-latex"><span class="header-section-number">18.5.4</span> Creating Regression Tables in LaTeX</a></li>
  <li><a href="#saving-tables-to-files" id="toc-saving-tables-to-files" class="nav-link" data-scroll-target="#saving-tables-to-files"><span class="header-section-number">18.5.5</span> Saving Tables to Files</a></li>
  <li><a href="#using-stargazer-for-latex-output" id="toc-using-stargazer-for-latex-output" class="nav-link" data-scroll-target="#using-stargazer-for-latex-output"><span class="header-section-number">18.5.6</span> Using stargazer for LaTeX Output</a></li>
  </ul></li>
  <li><a href="#advanced-topics-and-best-practices" id="toc-advanced-topics-and-best-practices" class="nav-link" data-scroll-target="#advanced-topics-and-best-practices"><span class="header-section-number">18.6</span> Advanced Topics and Best Practices</a>
  <ul class="collapse">
  <li><a href="#panel-data-tables-with-fixed-effects" id="toc-panel-data-tables-with-fixed-effects" class="nav-link" data-scroll-target="#panel-data-tables-with-fixed-effects"><span class="header-section-number">18.6.1</span> Panel Data Tables with Fixed Effects</a></li>
  <li><a href="#combining-summary-statistics-and-tests" id="toc-combining-summary-statistics-and-tests" class="nav-link" data-scroll-target="#combining-summary-statistics-and-tests"><span class="header-section-number">18.6.2</span> Combining Summary Statistics and Tests</a></li>
  <li><a href="#journal-specific-formatting" id="toc-journal-specific-formatting" class="nav-link" data-scroll-target="#journal-specific-formatting"><span class="header-section-number">18.6.3</span> Journal-Specific Formatting</a></li>
  </ul></li>
  <li><a href="#summary-and-best-practices" id="toc-summary-and-best-practices" class="nav-link" data-scroll-target="#summary-and-best-practices"><span class="header-section-number">18.7</span> Summary and Best Practices</a>
  <ul class="collapse">
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways"><span class="header-section-number">18.7.1</span> Key Takeaways</a></li>
  <li><a href="#checklist-for-publication-quality-tables" id="toc-checklist-for-publication-quality-tables" class="nav-link" data-scroll-target="#checklist-for-publication-quality-tables"><span class="header-section-number">18.7.2</span> Checklist for Publication-Quality Tables</a></li>
  <li><a href="#common-pitfalls-to-avoid" id="toc-common-pitfalls-to-avoid" class="nav-link" data-scroll-target="#common-pitfalls-to-avoid"><span class="header-section-number">18.7.3</span> Common Pitfalls to Avoid</a></li>
  <li><a href="#recommended-workflow" id="toc-recommended-workflow" class="nav-link" data-scroll-target="#recommended-workflow"><span class="header-section-number">18.7.4</span> Recommended Workflow</a></li>
  </ul></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources"><span class="header-section-number">18.8</span> Additional Resources</a>
  <ul class="collapse">
  <li><a href="#example-papers-with-excellent-tables" id="toc-example-papers-with-excellent-tables" class="nav-link" data-scroll-target="#example-papers-with-excellent-tables"><span class="header-section-number">18.8.1</span> Example Papers with Excellent Tables</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../data-analysis/visualization/index.html">Visualization and Research Output</a></li><li class="breadcrumb-item"><a href="../../data-analysis/tables/index.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tables for Research</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tables for Research</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="18.1">
<h2 data-number="18.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">18.1</span> Introduction</h2>
<p>Tables are fundamental to empirical research in finance. Whether you’re presenting summary statistics of your data, reporting regression results, or comparing model performance across specifications, clear and well-formatted tables communicate your findings effectively to readers. In this chapter, you’ll learn how to create publication-quality tables in Python and export them to formats suitable for academic papers.</p>
<p>The objectives of this chapter are to:</p>
<ol type="1">
<li>Create descriptive statistics tables that summarize key features of your data</li>
<li>Format regression output tables with proper presentation of coefficients, standard errors, and model statistics</li>
<li>Export tables to LaTeX format for inclusion in academic papers</li>
<li>Apply best practices for table design that meet journal formatting requirements</li>
</ol>
<p>By the end of this chapter, you’ll be able to produce tables that look professional, convey information clearly, and can be easily integrated into your research papers. The emphasis is on practical workflows that save time while ensuring your tables meet the standards expected in top finance journals.</p>
</section>
<section id="prerequisites" class="level2" data-number="18.2">
<h2 data-number="18.2" class="anchored" data-anchor-id="prerequisites"><span class="header-section-number">18.2</span> Prerequisites</h2>
<p>This chapter assumes you are familiar with pandas DataFrames (covered in <a href="#">Introduction to DataFrames</a>) and have basic knowledge of regression analysis. You should also have pandas and statsmodels installed in your Python environment. We’ll introduce additional packages for table formatting as we go.</p>
</section>
<section id="descriptive-statistics-tables" class="level2" data-number="18.3">
<h2 data-number="18.3" class="anchored" data-anchor-id="descriptive-statistics-tables"><span class="header-section-number">18.3</span> Descriptive Statistics Tables</h2>
<p>Descriptive statistics tables typically appear early in empirical papers, often labeled “Summary Statistics” or “Descriptive Statistics.” They provide readers with a quick overview of the key variables in your analysis: their central tendency, dispersion, and sometimes their distribution properties.</p>
<section id="basic-summary-statistics-with-pandas" class="level3" data-number="18.3.1">
<h3 data-number="18.3.1" class="anchored" data-anchor-id="basic-summary-statistics-with-pandas"><span class="header-section-number">18.3.1</span> Basic Summary Statistics with pandas</h3>
<p>The simplest way to generate summary statistics is using pandas’ built-in <code>describe()</code> method. Let’s start with a sample dataset of stock returns:</p>
<div id="0ea3e0dc" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set random seed for reproducibility</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create sample data: monthly returns for 5 stocks over 60 months</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>stocks <span class="op">=</span> [<span class="st">'AAPL'</span>, <span class="st">'GOOGL'</span>, <span class="st">'MSFT'</span>, <span class="st">'AMZN'</span>, <span class="st">'META'</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>n_months <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: pd.date_range(<span class="st">'2019-01-01'</span>, periods<span class="op">=</span>n_months, freq<span class="op">=</span><span class="st">'MS'</span>),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> stock <span class="kw">in</span> stocks:</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate returns with different means and volatilities</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    mean_return <span class="op">=</span> np.random.uniform(<span class="op">-</span><span class="fl">0.01</span>, <span class="fl">0.02</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    volatility <span class="op">=</span> np.random.uniform(<span class="fl">0.05</span>, <span class="fl">0.10</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    data[stock] <span class="op">=</span> np.random.normal(mean_return, volatility, n_months)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.set_index(<span class="st">'Date'</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># View first few rows</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>df.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">AAPL</th>
<th data-quarto-table-cell-role="th">GOOGL</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">AMZN</th>
<th data-quarto-table-cell-role="th">META</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2019-01-01</th>
<td>0.064409</td>
<td>0.053167</td>
<td>-0.067056</td>
<td>0.036091</td>
<td>0.105055</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2019-02-01</th>
<td>0.149786</td>
<td>0.089193</td>
<td>-0.034479</td>
<td>-0.016558</td>
<td>0.020009</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2019-03-01</th>
<td>-0.021602</td>
<td>-0.005442</td>
<td>0.016658</td>
<td>-0.091181</td>
<td>-0.084127</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2019-04-01</th>
<td>-0.021601</td>
<td>0.065823</td>
<td>-0.029655</td>
<td>-0.155592</td>
<td>0.052071</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2019-05-01</th>
<td>0.155266</td>
<td>0.023291</td>
<td>-0.110068</td>
<td>-0.052587</td>
<td>0.127354</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now generate basic summary statistics:</p>
<div id="3990a593" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic descriptive statistics</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> df.describe()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>summary</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">AAPL</th>
<th data-quarto-table-cell-role="th">GOOGL</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">AMZN</th>
<th data-quarto-table-cell-role="th">META</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">count</th>
<td>60.000000</td>
<td>60.000000</td>
<td>60.000000</td>
<td>60.000000</td>
<td>60.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">mean</th>
<td>-0.015512</td>
<td>0.002233</td>
<td>0.012238</td>
<td>-0.005251</td>
<td>-0.003366</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">std</th>
<td>0.088307</td>
<td>0.063891</td>
<td>0.071728</td>
<td>0.100086</td>
<td>0.065310</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">min</th>
<td>-0.189902</td>
<td>-0.174253</td>
<td>-0.114431</td>
<td>-0.204792</td>
<td>-0.207925</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">25%</th>
<td>-0.065834</td>
<td>-0.029886</td>
<td>-0.051764</td>
<td>-0.078866</td>
<td>-0.043179</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">50%</th>
<td>-0.021601</td>
<td>0.001494</td>
<td>0.024828</td>
<td>0.001821</td>
<td>0.000423</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">75%</th>
<td>0.035533</td>
<td>0.037292</td>
<td>0.057643</td>
<td>0.052005</td>
<td>0.041835</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">max</th>
<td>0.181899</td>
<td>0.162542</td>
<td>0.217884</td>
<td>0.361928</td>
<td>0.128034</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <code>describe()</code> method provides count, mean, standard deviation, minimum, quartiles, and maximum. For financial data, we often want to customize this to show statistics more relevant to our analysis.</p>
</section>
<section id="customizing-summary-statistics" class="level3" data-number="18.3.2">
<h3 data-number="18.3.2" class="anchored" data-anchor-id="customizing-summary-statistics"><span class="header-section-number">18.3.2</span> Customizing Summary Statistics</h3>
<p>Let’s create a more informative summary statistics table tailored for financial returns:</p>
<div id="eb0ce8c3" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_summary_stats(df):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Create customized summary statistics for financial returns.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">    df : pd.DataFrame</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">        DataFrame containing return data</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Summary statistics table</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> pd.DataFrame({</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mean'</span>: df.mean(),</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Std Dev'</span>: df.std(),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Min'</span>: df.<span class="bu">min</span>(),</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Max'</span>: df.<span class="bu">max</span>(),</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Skewness'</span>: df.skew(),</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Kurtosis'</span>: df.kurtosis(),</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Obs'</span>: df.count()</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> stats</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>summary_stats <span class="op">=</span> create_summary_stats(df)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>summary_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean</th>
<th data-quarto-table-cell-role="th">Std Dev</th>
<th data-quarto-table-cell-role="th">Min</th>
<th data-quarto-table-cell-role="th">Max</th>
<th data-quarto-table-cell-role="th">Skewness</th>
<th data-quarto-table-cell-role="th">Kurtosis</th>
<th data-quarto-table-cell-role="th">Obs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">AAPL</th>
<td>-0.015512</td>
<td>0.088307</td>
<td>-0.189902</td>
<td>0.181899</td>
<td>0.071449</td>
<td>-0.410886</td>
<td>60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">GOOGL</th>
<td>0.002233</td>
<td>0.063891</td>
<td>-0.174253</td>
<td>0.162542</td>
<td>-0.181071</td>
<td>0.596248</td>
<td>60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">MSFT</th>
<td>0.012238</td>
<td>0.071728</td>
<td>-0.114431</td>
<td>0.217884</td>
<td>0.377622</td>
<td>-0.055411</td>
<td>60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">AMZN</th>
<td>-0.005251</td>
<td>0.100086</td>
<td>-0.204792</td>
<td>0.361928</td>
<td>0.711126</td>
<td>2.126233</td>
<td>60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">META</th>
<td>-0.003366</td>
<td>0.065310</td>
<td>-0.207925</td>
<td>0.128034</td>
<td>-0.315057</td>
<td>0.511462</td>
<td>60</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>This gives us a better picture of our return distributions, including skewness and kurtosis which are important for understanding tail risk.</p>
</section>
<section id="formatting-numbers-for-presentation" class="level3" data-number="18.3.3">
<h3 data-number="18.3.3" class="anchored" data-anchor-id="formatting-numbers-for-presentation"><span class="header-section-number">18.3.3</span> Formatting Numbers for Presentation</h3>
<p>Raw statistics often have too many decimal places for presentation. Let’s format the table appropriately:</p>
<div id="74f7f04e" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> format_summary_stats(stats_df):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Format summary statistics for presentation.</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">    stats_df : pd.DataFrame</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Summary statistics DataFrame</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Formatted summary statistics</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a copy to avoid modifying original</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    formatted <span class="op">=</span> stats_df.copy()</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Format each column appropriately</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">'Mean'</span>, <span class="st">'Std Dev'</span>, <span class="st">'Skewness'</span>, <span class="st">'Kurtosis'</span>]:</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>        formatted[col] <span class="op">=</span> formatted[col].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="ss">f"</span><span class="sc">{</span>x<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">'Min'</span>, <span class="st">'Max'</span>]:</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        formatted[col] <span class="op">=</span> formatted[col].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="ss">f"</span><span class="sc">{</span>x<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Keep Obs as integer</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    formatted[<span class="st">'Obs'</span>] <span class="op">=</span> formatted[<span class="st">'Obs'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> formatted</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>formatted_stats <span class="op">=</span> format_summary_stats(summary_stats)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>formatted_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean</th>
<th data-quarto-table-cell-role="th">Std Dev</th>
<th data-quarto-table-cell-role="th">Min</th>
<th data-quarto-table-cell-role="th">Max</th>
<th data-quarto-table-cell-role="th">Skewness</th>
<th data-quarto-table-cell-role="th">Kurtosis</th>
<th data-quarto-table-cell-role="th">Obs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">AAPL</th>
<td>-0.0155</td>
<td>0.0883</td>
<td>-0.190</td>
<td>0.182</td>
<td>0.0714</td>
<td>-0.4109</td>
<td>60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">GOOGL</th>
<td>0.0022</td>
<td>0.0639</td>
<td>-0.174</td>
<td>0.163</td>
<td>-0.1811</td>
<td>0.5962</td>
<td>60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">MSFT</th>
<td>0.0122</td>
<td>0.0717</td>
<td>-0.114</td>
<td>0.218</td>
<td>0.3776</td>
<td>-0.0554</td>
<td>60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">AMZN</th>
<td>-0.0053</td>
<td>0.1001</td>
<td>-0.205</td>
<td>0.362</td>
<td>0.7111</td>
<td>2.1262</td>
<td>60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">META</th>
<td>-0.0034</td>
<td>0.0653</td>
<td>-0.208</td>
<td>0.128</td>
<td>-0.3151</td>
<td>0.5115</td>
<td>60</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Significant Figures in Finance Research
</div>
</div>
<div class="callout-body-container callout-body">
<p>Different statistics require different precision levels:</p>
<ul>
<li><strong>Returns and prices</strong>: 3-4 decimal places typically suffice</li>
<li><strong>Statistical tests (t-stats, p-values)</strong>: 2-3 decimal places</li>
<li><strong>R-squared values</strong>: 3-4 decimal places</li>
<li><strong>Sample sizes</strong>: No decimal places (integers)</li>
</ul>
<p>When in doubt, check recent papers in your target journal to see their conventions.</p>
</div>
</div>
</section>
<section id="panel-data-summary-statistics" class="level3" data-number="18.3.4">
<h3 data-number="18.3.4" class="anchored" data-anchor-id="panel-data-summary-statistics"><span class="header-section-number">18.3.4</span> Panel Data Summary Statistics</h3>
<p>When working with panel data (multiple entities observed over time), you often want to present both cross-sectional and time-series dimensions:</p>
<div id="e98d8d29" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create panel data: returns for 10 firms over 60 months</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">123</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>n_firms <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>n_periods <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>panel_data <span class="op">=</span> []</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> firm_id <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_firms <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(n_periods):</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        panel_data.append({</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">'firm_id'</span>: firm_id,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">'period'</span>: t,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">'returns'</span>: np.random.normal(<span class="fl">0.01</span>, <span class="fl">0.05</span>),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">'market_cap'</span>: np.random.lognormal(<span class="dv">10</span>, <span class="dv">2</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">'book_to_market'</span>: np.random.gamma(<span class="dv">2</span>, <span class="fl">0.5</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>panel_df <span class="op">=</span> pd.DataFrame(panel_data)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by firm (cross-sectional)</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>cross_section <span class="op">=</span> panel_df.groupby(<span class="st">'firm_id'</span>)[[<span class="st">'returns'</span>, <span class="st">'market_cap'</span>, <span class="st">'book_to_market'</span>]].mean()</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Cross-sectional averages (by firm):"</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cross_section.describe())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-sectional averages (by firm):
         returns     market_cap  book_to_market
count  10.000000      10.000000       10.000000
mean    0.010209  176798.631089        0.986518
std     0.004949  122379.986024        0.070979
min     0.003166   59440.133610        0.884198
25%     0.005920  102011.132256        0.937919
50%     0.011089  147587.267562        0.990285
75%     0.014329  192955.334105        1.030200
max     0.016038  482650.132081        1.098476</code></pre>
</div>
</div>
<div id="adcce733" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Time-series statistics</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Time-series statistics:"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>time_series <span class="op">=</span> panel_df.groupby(<span class="st">'period'</span>)[[<span class="st">'returns'</span>, <span class="st">'market_cap'</span>, <span class="st">'book_to_market'</span>]].mean()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(time_series.describe())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Time-series statistics:
         returns    market_cap  book_to_market
count  60.000000  6.000000e+01       60.000000
mean    0.010209  1.767986e+05        0.986518
std     0.013868  3.264904e+05        0.198994
min    -0.027006  1.449108e+04        0.510657
25%     0.001668  5.120925e+04        0.863925
50%     0.012041  8.341678e+04        0.966076
75%     0.018662  1.699882e+05        1.090577
max     0.034992  2.339858e+06        1.571215</code></pre>
</div>
</div>
</section>
<section id="comparing-groups-in-summary-statistics" class="level3" data-number="18.3.5">
<h3 data-number="18.3.5" class="anchored" data-anchor-id="comparing-groups-in-summary-statistics"><span class="header-section-number">18.3.5</span> Comparing Groups in Summary Statistics</h3>
<p>Research papers often compare statistics across different groups (e.g., treated vs.&nbsp;control, large vs.&nbsp;small firms):</p>
<div id="05b255e7" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a grouping variable</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>panel_df[<span class="st">'size_group'</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    panel_df[<span class="st">'market_cap'</span>],</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">'Small'</span>, <span class="st">'Large'</span>]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by group</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>grouped_stats <span class="op">=</span> panel_df.groupby(<span class="st">'size_group'</span>)[[<span class="st">'returns'</span>, <span class="st">'book_to_market'</span>]].agg([</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'Mean'</span>, <span class="st">'mean'</span>),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'Std Dev'</span>, <span class="st">'std'</span>),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'N'</span>, <span class="st">'count'</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Flatten column names</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>grouped_stats.columns <span class="op">=</span> [<span class="st">'_'</span>.join(col).strip() <span class="cf">for</span> col <span class="kw">in</span> grouped_stats.columns.values]</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>grouped_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/jr/cn9h86ld68qb5rtvs9gsb1vr0000gn/T/ipykernel_38836/3721035929.py:9: FutureWarning: The default of observed=False is deprecated and will be changed to True in a future version of pandas. Pass observed=False to retain current behavior or observed=True to adopt the future default and silence this warning.
  grouped_stats = panel_df.groupby('size_group')[['returns', 'book_to_market']].agg([</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">returns_Mean</th>
<th data-quarto-table-cell-role="th">returns_Std Dev</th>
<th data-quarto-table-cell-role="th">returns_N</th>
<th data-quarto-table-cell-role="th">book_to_market_Mean</th>
<th data-quarto-table-cell-role="th">book_to_market_Std Dev</th>
<th data-quarto-table-cell-role="th">book_to_market_N</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">size_group</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Small</th>
<td>0.010225</td>
<td>0.050226</td>
<td>599</td>
<td>0.987235</td>
<td>0.669736</td>
<td>599</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Large</th>
<td>0.000245</td>
<td>NaN</td>
<td>1</td>
<td>0.557118</td>
<td>NaN</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>This type of table is common in papers examining differences between portfolios or firm characteristics.</p>
</section>
<section id="adding-statistical-tests-to-summary-tables" class="level3" data-number="18.3.6">
<h3 data-number="18.3.6" class="anchored" data-anchor-id="adding-statistical-tests-to-summary-tables"><span class="header-section-number">18.3.6</span> Adding Statistical Tests to Summary Tables</h3>
<p>When comparing groups, you often want to test whether differences are statistically significant:</p>
<div id="35af704e" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats <span class="im">as</span> scipy_stats</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_difference_test(df, group_col, value_cols):</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Add t-test for difference in means between two groups.</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">    df : pd.DataFrame</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Panel data with grouping variable</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">    group_col : str</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">        Name of grouping column (must have exactly 2 groups)</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">    value_cols : list</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">        Variables to test</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">        Table with group means and difference tests</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    groups <span class="op">=</span> df[group_col].unique()</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(groups) <span class="op">!=</span> <span class="dv">2</span>:</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Grouping variable must have exactly 2 groups"</span>)</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> []</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> value_cols:</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>        group1_data <span class="op">=</span> df[df[group_col] <span class="op">==</span> groups[<span class="dv">0</span>]][col].dropna()</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>        group2_data <span class="op">=</span> df[df[group_col] <span class="op">==</span> groups[<span class="dv">1</span>]][col].dropna()</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>        mean1 <span class="op">=</span> group1_data.mean()</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>        mean2 <span class="op">=</span> group2_data.mean()</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Two-sample t-test</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>        t_stat, p_value <span class="op">=</span> scipy_stats.ttest_ind(group1_data, group2_data)</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>        results.append({</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Variable'</span>: col,</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f'</span><span class="sc">{</span>groups[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Mean'</span>: <span class="ss">f'</span><span class="sc">{</span>mean1<span class="sc">:.4f}</span><span class="ss">'</span>,</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f'</span><span class="sc">{</span>groups[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> Mean'</span>: <span class="ss">f'</span><span class="sc">{</span>mean2<span class="sc">:.4f}</span><span class="ss">'</span>,</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Difference'</span>: <span class="ss">f'</span><span class="sc">{</span>mean1 <span class="op">-</span> mean2<span class="sc">:.4f}</span><span class="ss">'</span>,</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>            <span class="st">'t-stat'</span>: <span class="ss">f'</span><span class="sc">{</span>t_stat<span class="sc">:.3f}</span><span class="ss">'</span>,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>            <span class="st">'p-value'</span>: <span class="ss">f'</span><span class="sc">{</span>p_value<span class="sc">:.3f}</span><span class="ss">'</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(results)</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Test differences between small and large firms</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>diff_test <span class="op">=</span> add_difference_test(panel_df, <span class="st">'size_group'</span>, [<span class="st">'returns'</span>, <span class="st">'book_to_market'</span>])</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>diff_test</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Small Mean</th>
<th data-quarto-table-cell-role="th">Large Mean</th>
<th data-quarto-table-cell-role="th">Difference</th>
<th data-quarto-table-cell-role="th">t-stat</th>
<th data-quarto-table-cell-role="th">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>returns</td>
<td>0.0102</td>
<td>0.0002</td>
<td>0.0100</td>
<td>0.199</td>
<td>0.843</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>book_to_market</td>
<td>0.9872</td>
<td>0.5571</td>
<td>0.4301</td>
<td>0.642</td>
<td>0.521</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Choosing the Right Statistical Test
</div>
</div>
<div class="callout-body-container callout-body">
<p>The t-test above assumes normally distributed data with equal variances. For financial data:</p>
<ul>
<li>Use <strong>Welch’s t-test</strong> (default in <code>scipy.stats.ttest_ind</code>) if variances differ</li>
<li>Consider <strong>Mann-Whitney U test</strong> for non-normal distributions</li>
<li>Use <strong>paired t-test</strong> for matched samples (e.g., before/after comparisons)</li>
<li>Bootstrap standard errors for robust inference with small samples</li>
</ul>
</div>
</div>
</section>
</section>
<section id="regression-output-tables" class="level2" data-number="18.4">
<h2 data-number="18.4" class="anchored" data-anchor-id="regression-output-tables"><span class="header-section-number">18.4</span> Regression Output Tables</h2>
<p>Regression results are the heart of most empirical papers in finance. A well-formatted regression table presents coefficients, standard errors (or t-statistics), and model fit statistics in a clear, compact format that allows readers to quickly assess your results.</p>
<section id="basic-regression-with-statsmodels" class="level3" data-number="18.4.1">
<h3 data-number="18.4.1" class="anchored" data-anchor-id="basic-regression-with-statsmodels"><span class="header-section-number">18.4.1</span> Basic Regression with statsmodels</h3>
<p>Let’s start by estimating a simple regression and examining the output:</p>
<div id="a027e5d0" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for regression</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dependent variable: firm returns</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Independent variables: market cap (log), book-to-market ratio</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>panel_df[<span class="st">'log_market_cap'</span>] <span class="op">=</span> np.log(panel_df[<span class="st">'market_cap'</span>])</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> panel_df[<span class="st">'returns'</span>]</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> panel_df[[<span class="st">'log_market_cap'</span>, <span class="st">'book_to_market'</span>]]</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)  <span class="co"># Add intercept</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate OLS regression</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y, X)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> model.fit()</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># View default output</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(results.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                returns   R-squared:                       0.001
Model:                            OLS   Adj. R-squared:                 -0.003
Method:                 Least Squares   F-statistic:                    0.2171
Date:                Tue, 23 Dec 2025   Prob (F-statistic):              0.805
Time:                        13:57:01   Log-Likelihood:                 944.57
No. Observations:                 600   AIC:                            -1883.
Df Residuals:                     597   BIC:                            -1870.
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
==================================================================================
                     coef    std err          t      P&gt;|t|      [0.025      0.975]
----------------------------------------------------------------------------------
const              0.0041      0.011      0.360      0.719      -0.018       0.026
log_market_cap     0.0007      0.001      0.629      0.530      -0.001       0.003
book_to_market    -0.0005      0.003     -0.163      0.871      -0.007       0.006
==============================================================================
Omnibus:                        0.097   Durbin-Watson:                   2.072
Prob(Omnibus):                  0.953   Jarque-Bera (JB):                0.094
Skew:                          -0.030   Prob(JB):                        0.954
Kurtosis:                       2.986   Cond. No.                         57.5
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
<p>The default summary from statsmodels is informative but not publication-ready. Let’s extract and format the key information.</p>
</section>
<section id="creating-a-basic-regression-table" class="level3" data-number="18.4.2">
<h3 data-number="18.4.2" class="anchored" data-anchor-id="creating-a-basic-regression-table"><span class="header-section-number">18.4.2</span> Creating a Basic Regression Table</h3>
<div id="1fda3727" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_regression_table(results):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Create a formatted regression table from statsmodels results.</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">    results : statsmodels RegressionResults</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Fitted regression model</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Formatted regression table</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract coefficients and standard errors</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    coefs <span class="op">=</span> results.params</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    std_errs <span class="op">=</span> results.bse</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    t_stats <span class="op">=</span> results.tvalues</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    p_values <span class="op">=</span> results.pvalues</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create table</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    table_data <span class="op">=</span> []</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> coefs.index:</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Format coefficient with standard error in parentheses</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>        coef_str <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>coefs[var]<span class="sc">:.4f}</span><span class="ss">"</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>        se_str <span class="op">=</span> <span class="ss">f"(</span><span class="sc">{</span>std_errs[var]<span class="sc">:.4f}</span><span class="ss">)"</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add significance stars</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> p_values[var] <span class="op">&lt;</span> <span class="fl">0.01</span>:</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>            coef_str <span class="op">+=</span> <span class="st">"***"</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> p_values[var] <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>            coef_str <span class="op">+=</span> <span class="st">"**"</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> p_values[var] <span class="op">&lt;</span> <span class="fl">0.10</span>:</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>            coef_str <span class="op">+=</span> <span class="st">"*"</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>        table_data.append({</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Variable'</span>: var,</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Coefficient'</span>: coef_str,</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Std Error'</span>: se_str</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> pd.DataFrame(table_data)</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add model statistics</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>    stats_rows <span class="op">=</span> pd.DataFrame([</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>        {<span class="st">'Variable'</span>: <span class="st">'R-squared'</span>, <span class="st">'Coefficient'</span>: <span class="ss">f"</span><span class="sc">{</span>results<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>, <span class="st">'Std Error'</span>: <span class="st">''</span>},</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>        {<span class="st">'Variable'</span>: <span class="st">'Observations'</span>, <span class="st">'Coefficient'</span>: <span class="bu">str</span>(<span class="bu">int</span>(results.nobs)), <span class="st">'Std Error'</span>: <span class="st">''</span>}</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> pd.concat([table, stats_rows], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>reg_table <span class="op">=</span> create_regression_table(results)</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>reg_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Coefficient</th>
<th data-quarto-table-cell-role="th">Std Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>const</td>
<td>0.0041</td>
<td>(0.0113)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>log_market_cap</td>
<td>0.0007</td>
<td>(0.0010)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>book_to_market</td>
<td>-0.0005</td>
<td>(0.0031)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>R-squared</td>
<td>0.0007</td>
<td></td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Observations</td>
<td>600</td>
<td></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Significance Stars
</div>
</div>
<div class="callout-body-container callout-body">
<p>The convention for significance stars in finance research:</p>
<ul>
<li><code>***</code> : p &lt; 0.01 (1% level)</li>
<li><code>**</code> : p &lt; 0.05 (5% level)</li>
<li><code>*</code> : p &lt; 0.10 (10% level)</li>
</ul>
<p>Always include a note below your table explaining this convention. Some journals discourage stars and prefer reporting exact p-values or confidence intervals instead.</p>
</div>
</div>
</section>
<section id="comparing-multiple-model-specifications" class="level3" data-number="18.4.3">
<h3 data-number="18.4.3" class="anchored" data-anchor-id="comparing-multiple-model-specifications"><span class="header-section-number">18.4.3</span> Comparing Multiple Model Specifications</h3>
<p>Research papers typically present several model specifications side-by-side. Let’s create a multi-column regression table:</p>
<div id="779d70cf" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate multiple specifications</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 1: Just market cap</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> sm.add_constant(panel_df[[<span class="st">'log_market_cap'</span>]])</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>model1 <span class="op">=</span> sm.OLS(panel_df[<span class="st">'returns'</span>], X1).fit()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 2: Market cap + book-to-market</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> sm.add_constant(panel_df[[<span class="st">'log_market_cap'</span>, <span class="st">'book_to_market'</span>]])</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>model2 <span class="op">=</span> sm.OLS(panel_df[<span class="st">'returns'</span>], X2).fit()</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 3: Add firm fixed effects (simple dummy approach for illustration)</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>panel_df[<span class="st">'firm_dummies'</span>] <span class="op">=</span> pd.Categorical(panel_df[<span class="st">'firm_id'</span>])</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>X3 <span class="op">=</span> sm.add_constant(</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    pd.concat([</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        panel_df[[<span class="st">'log_market_cap'</span>, <span class="st">'book_to_market'</span>]],</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        pd.get_dummies(panel_df[<span class="st">'firm_dummies'</span>], drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    ], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>model3 <span class="op">=</span> sm.OLS(panel_df[<span class="st">'returns'</span>], X3).fit()</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_multi_model_table(models, model_names<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">    Create a regression table comparing multiple models.</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co">    models : list</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co">        List of fitted statsmodels regression results</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">    model_names : list, optional</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">        Names for each model column</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="co">        Multi-column regression table</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> model_names <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>        model_names <span class="op">=</span> [<span class="ss">f"Model </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(models))]</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Collect all unique variables across models</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    all_vars <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> model <span class="kw">in</span> models:</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>        all_vars.update(model.params.index)</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove firm dummies for cleaner display</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    all_vars <span class="op">=</span> [v <span class="cf">for</span> v <span class="kw">in</span> all_vars <span class="cf">if</span> <span class="kw">not</span> <span class="bu">str</span>(v).startswith(<span class="st">'firm_dummies'</span>)]</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build table</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>    table_dict <span class="op">=</span> {<span class="st">'Variable'</span>: []}</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> name <span class="kw">in</span> model_names:</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>        table_dict[name] <span class="op">=</span> []</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> all_vars:</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add coefficient row</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>        table_dict[<span class="st">'Variable'</span>].append(var)</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i, model <span class="kw">in</span> <span class="bu">enumerate</span>(models):</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> var <span class="kw">in</span> model.params.index:</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>                coef <span class="op">=</span> model.params[var]</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>                p_val <span class="op">=</span> model.pvalues[var]</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Format with stars</span></span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>                coef_str <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>coef<span class="sc">:.4f}</span><span class="ss">"</span></span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> p_val <span class="op">&lt;</span> <span class="fl">0.01</span>:</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>                    coef_str <span class="op">+=</span> <span class="st">"***"</span></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>                <span class="cf">elif</span> p_val <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>                    coef_str <span class="op">+=</span> <span class="st">"**"</span></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>                <span class="cf">elif</span> p_val <span class="op">&lt;</span> <span class="fl">0.10</span>:</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>                    coef_str <span class="op">+=</span> <span class="st">"*"</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>                table_dict[model_names[i]].append(coef_str)</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>                table_dict[model_names[i]].append(<span class="st">""</span>)</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add standard error row</span></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>        table_dict[<span class="st">'Variable'</span>].append(<span class="st">''</span>)</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i, model <span class="kw">in</span> <span class="bu">enumerate</span>(models):</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> var <span class="kw">in</span> model.params.index:</span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>                se <span class="op">=</span> model.bse[var]</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>                table_dict[model_names[i]].append(<span class="ss">f"(</span><span class="sc">{</span>se<span class="sc">:.4f}</span><span class="ss">)"</span>)</span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>                table_dict[model_names[i]].append(<span class="st">""</span>)</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add model statistics</span></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> [</span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'R-squared'</span>, <span class="kw">lambda</span> m: <span class="ss">f"</span><span class="sc">{</span>m<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>),</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'Adj. R-squared'</span>, <span class="kw">lambda</span> m: <span class="ss">f"</span><span class="sc">{</span>m<span class="sc">.</span>rsquared_adj<span class="sc">:.4f}</span><span class="ss">"</span>),</span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'Observations'</span>, <span class="kw">lambda</span> m: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(m.nobs)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> stat_name, stat_func <span class="kw">in</span> stats:</span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a>        table_dict[<span class="st">'Variable'</span>].append(stat_name)</span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i, model <span class="kw">in</span> <span class="bu">enumerate</span>(models):</span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a>            table_dict[model_names[i]].append(stat_func(model))</span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(table_dict)</span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a>multi_reg_table <span class="op">=</span> create_multi_model_table([model1, model2, model3])</span>
<span id="cb15-98"><a href="#cb15-98" aria-hidden="true" tabindex="-1"></a>multi_reg_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Model 1</th>
<th data-quarto-table-cell-role="th">Model 2</th>
<th data-quarto-table-cell-role="th">Model 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>2</td>
<td></td>
<td></td>
<td>-0.0064</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>3</td>
<td></td>
<td></td>
<td>0.0032</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>book_to_market</td>
<td></td>
<td>-0.0005</td>
<td>-0.0006</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td></td>
<td></td>
<td>(0.0031)</td>
<td>(0.0031)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>4</td>
<td></td>
<td></td>
<td>0.0005</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>5</td>
<td></td>
<td></td>
<td>-0.0062</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>6</td>
<td></td>
<td></td>
<td>0.0055</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>7</td>
<td></td>
<td></td>
<td>0.0061</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>8</td>
<td></td>
<td></td>
<td>-0.0049</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">16</th>
<td>9</td>
<td></td>
<td></td>
<td>0.0020</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">18</th>
<td>10</td>
<td></td>
<td></td>
<td>0.0065</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">19</th>
<td></td>
<td></td>
<td></td>
<td>(0.0092)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">20</th>
<td>const</td>
<td>0.0035</td>
<td>0.0041</td>
<td>0.0030</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">21</th>
<td></td>
<td>(0.0107)</td>
<td>(0.0113)</td>
<td>(0.0131)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">22</th>
<td>log_market_cap</td>
<td>0.0007</td>
<td>0.0007</td>
<td>0.0007</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">23</th>
<td></td>
<td>(0.0010)</td>
<td>(0.0010)</td>
<td>(0.0011)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">24</th>
<td>R-squared</td>
<td>0.0007</td>
<td>0.0007</td>
<td>0.0096</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">25</th>
<td>Adj. R-squared</td>
<td>-0.0010</td>
<td>-0.0026</td>
<td>-0.0089</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">26</th>
<td>Observations</td>
<td>600</td>
<td>600</td>
<td>600</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="using-stargazer-for-professional-tables" class="level3" data-number="18.4.4">
<h3 data-number="18.4.4" class="anchored" data-anchor-id="using-stargazer-for-professional-tables"><span class="header-section-number">18.4.4</span> Using stargazer for Professional Tables</h3>
<p>While our custom functions work well, the <code>stargazer</code> package (Python port of the R package) provides a more automated solution for creating publication-quality regression tables:</p>
<div id="bf945a1c" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> stargazer.stargazer <span class="im">import</span> Stargazer</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create stargazer table</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>stargazer <span class="op">=</span> Stargazer([model1, model2])</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display as text (can also output to LaTeX)</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stargazer)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;stargazer.stargazer.Stargazer object at 0x133c54ec0&gt;</code></pre>
</div>
</div>
<p>The stargazer output follows academic conventions closely and includes several useful features automatically.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Alternatives to stargazer
</div>
</div>
<div class="callout-body-container callout-body">
<p>While <code>stargazer</code> is popular, you might also consider:</p>
<ul>
<li><strong><code>statsmodels.iolib.summary2</code></strong>: Built into statsmodels for comparing models</li>
<li><strong><code>linearmodels</code></strong>: Excellent for panel data regressions with sophisticated standard errors</li>
<li><strong><code>regtabletotext</code></strong>: Lightweight package focused on clean text and LaTeX output</li>
<li><strong>Custom solutions</strong>: Building your own functions gives maximum control over formatting</li>
</ul>
</div>
</div>
</section>
<section id="handling-clustered-standard-errors" class="level3" data-number="18.4.5">
<h3 data-number="18.4.5" class="anchored" data-anchor-id="handling-clustered-standard-errors"><span class="header-section-number">18.4.5</span> Handling Clustered Standard Errors</h3>
<p>In finance research, especially with panel data, you often need to cluster standard errors by firm or time:</p>
<div id="4d6089c7" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate model with clustered standard errors</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Using firm clusters</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.regression.linear_model <span class="im">import</span> OLS</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> panel_df[<span class="st">'returns'</span>]</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(panel_df[[<span class="st">'log_market_cap'</span>, <span class="st">'book_to_market'</span>]])</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit with clustered standard errors</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>model_clustered <span class="op">=</span> OLS(y, X).fit(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    cov_type<span class="op">=</span><span class="st">'cluster'</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    cov_kwds<span class="op">=</span>{<span class="st">'groups'</span>: panel_df[<span class="st">'firm_id'</span>]}</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Standard OLS standard errors:"</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(results.bse)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Clustered standard errors (by firm):"</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_clustered.bse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Standard OLS standard errors:
const             0.011311
log_market_cap    0.001047
book_to_market    0.003072
dtype: float64

Clustered standard errors (by firm):
const             0.008306
log_market_cap    0.000976
book_to_market    0.002056
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Clustering and Standard Errors
</div>
</div>
<div class="callout-body-container callout-body">
<p>Clustering typically increases standard errors because it accounts for within-cluster correlation. Key considerations:</p>
<ul>
<li><strong>Cluster at the level of treatment assignment</strong>: If treatment varies by firm, cluster by firm</li>
<li><strong>Few clusters problem</strong>: With fewer than 20-30 clusters, consider wild bootstrap</li>
<li><strong>Two-way clustering</strong>: For panel data, you may need to cluster by both firm and time</li>
<li><strong>Report clustering in table notes</strong>: Always document your clustering approach</li>
</ul>
<p>Use <code>linearmodels</code> package for more sophisticated clustering options.</p>
</div>
</div>
</section>
<section id="formatting-model-fit-statistics" class="level3" data-number="18.4.6">
<h3 data-number="18.4.6" class="anchored" data-anchor-id="formatting-model-fit-statistics"><span class="header-section-number">18.4.6</span> Formatting Model Fit Statistics</h3>
<p>Different journals have different conventions for which fit statistics to report:</p>
<div id="28f396ad" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> format_model_stats(results, include_stats<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Format model fit statistics for regression tables.</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">    results : statsmodels RegressionResults</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Fitted model</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">    include_stats : list, optional</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Which statistics to include. Options: 'rsq', 'adj_rsq',</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">        'fstat', 'nobs', 'aic', 'bic'</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co">        Formatted statistics</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> include_stats <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>        include_stats <span class="op">=</span> [<span class="st">'rsq'</span>, <span class="st">'adj_rsq'</span>, <span class="st">'nobs'</span>]</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    stats_dict <span class="op">=</span> {</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'rsq'</span>: (<span class="st">'R-squared'</span>, results.rsquared),</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">'adj_rsq'</span>: (<span class="st">'Adj. R-squared'</span>, results.rsquared_adj),</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">'fstat'</span>: (<span class="st">'F-statistic'</span>, results.fvalue),</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nobs'</span>: (<span class="st">'Observations'</span>, results.nobs),</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add AIC/BIC if available</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">hasattr</span>(results, <span class="st">'aic'</span>):</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>        stats_dict[<span class="st">'aic'</span>] <span class="op">=</span> (<span class="st">'AIC'</span>, results.aic)</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">hasattr</span>(results, <span class="st">'bic'</span>):</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>        stats_dict[<span class="st">'bic'</span>] <span class="op">=</span> (<span class="st">'BIC'</span>, results.bic)</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    formatted <span class="op">=</span> []</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> include_stats:</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">in</span> stats_dict:</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>            name, value <span class="op">=</span> stats_dict[key]</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> key <span class="op">==</span> <span class="st">'nobs'</span>:</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>                formatted.append({<span class="st">'Statistic'</span>: name, <span class="st">'Value'</span>: <span class="ss">f'</span><span class="sc">{</span><span class="bu">int</span>(value)<span class="sc">}</span><span class="ss">'</span>})</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> key <span class="op">==</span> <span class="st">'fstat'</span>:</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>                formatted.append({<span class="st">'Statistic'</span>: name, <span class="st">'Value'</span>: <span class="ss">f'</span><span class="sc">{</span>value<span class="sc">:.2f}</span><span class="ss">'</span>})</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>                formatted.append({<span class="st">'Statistic'</span>: name, <span class="st">'Value'</span>: <span class="ss">f'</span><span class="sc">{</span>value<span class="sc">:.4f}</span><span class="ss">'</span>})</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(formatted)</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>model_stats <span class="op">=</span> format_model_stats(results, include_stats<span class="op">=</span>[<span class="st">'rsq'</span>, <span class="st">'adj_rsq'</span>, <span class="st">'fstat'</span>, <span class="st">'nobs'</span>])</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>model_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Statistic</th>
<th data-quarto-table-cell-role="th">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>R-squared</td>
<td>0.0007</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Adj. R-squared</td>
<td>-0.0026</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>F-statistic</td>
<td>0.22</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Observations</td>
<td>600</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="introduction-to-latex-tables" class="level2" data-number="18.5">
<h2 data-number="18.5" class="anchored" data-anchor-id="introduction-to-latex-tables"><span class="header-section-number">18.5</span> Introduction to LaTeX Tables</h2>
<p>Academic journals in finance typically require submissions in LaTeX format. Converting your Python tables to LaTeX is a crucial skill for publishing your research.</p>
<section id="understanding-latex-table-structure" class="level3" data-number="18.5.1">
<h3 data-number="18.5.1" class="anchored" data-anchor-id="understanding-latex-table-structure"><span class="header-section-number">18.5.1</span> Understanding LaTeX Table Structure</h3>
<p>A basic LaTeX table has this structure:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">table</span>}[htbp]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">\centering</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">\caption</span>{Summary Statistics}</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">\label</span>{<span class="ex">tab:summary</span>}</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">\begin</span>{<span class="ex">tabular</span>}{lcccc}</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\toprule</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    Variable <span class="op">&amp;</span> Mean <span class="op">&amp;</span> Std Dev <span class="op">&amp;</span> Min <span class="op">&amp;</span> Max <span class="fu">\\</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\midrule</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    Returns <span class="op">&amp;</span> 0.0105 <span class="op">&amp;</span> 0.0543 <span class="op">&amp;</span> -0.1234 <span class="op">&amp;</span> 0.1876 <span class="fu">\\</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    Market Cap <span class="op">&amp;</span> 12.45 <span class="op">&amp;</span> 2.34 <span class="op">&amp;</span> 8.12 <span class="op">&amp;</span> 18.99 <span class="fu">\\</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\bottomrule</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">\end</span>{<span class="ex">tabular</span>}</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">\begin</span>{<span class="ex">tablenotes</span>}</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\small</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\item</span> Note: All values are in decimals.</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">\end</span>{<span class="ex">tablenotes</span>}</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">table</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Key components:</p>
<ul>
<li><code>\begin{table}...\end{table}</code>: Table environment</li>
<li><code>\caption{}</code>: Table title</li>
<li><code>\label{}</code>: Reference label for citing in text</li>
<li><code>\begin{tabular}...\end{tabular}</code>: The actual table</li>
<li><code>{lcccc}</code>: Column alignments (l=left, c=center, r=right)</li>
<li><code>\toprule</code>, <code>\midrule</code>, <code>\bottomrule</code>: Professional-looking horizontal lines</li>
<li><code>\begin{tablenotes}...\end{tablenotes}</code>: Notes below table</li>
</ul>
</section>
<section id="converting-pandas-dataframes-to-latex" class="level3" data-number="18.5.2">
<h3 data-number="18.5.2" class="anchored" data-anchor-id="converting-pandas-dataframes-to-latex"><span class="header-section-number">18.5.2</span> Converting pandas DataFrames to LaTeX</h3>
<p>pandas provides built-in LaTeX export functionality:</p>
<div id="98b69c05" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic LaTeX export</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>latex_output <span class="op">=</span> formatted_stats.to_latex(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    caption<span class="op">=</span><span class="st">'Summary Statistics for Monthly Stock Returns'</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">'tab:summary_stats'</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    position<span class="op">=</span><span class="st">'htbp'</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(latex_output)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{table}[htbp]
\caption{Summary Statistics for Monthly Stock Returns}
\label{tab:summary_stats}
\begin{tabular}{lllllllr}
\toprule
 &amp; Mean &amp; Std Dev &amp; Min &amp; Max &amp; Skewness &amp; Kurtosis &amp; Obs \\
\midrule
AAPL &amp; -0.0155 &amp; 0.0883 &amp; -0.190 &amp; 0.182 &amp; 0.0714 &amp; -0.4109 &amp; 60 \\
GOOGL &amp; 0.0022 &amp; 0.0639 &amp; -0.174 &amp; 0.163 &amp; -0.1811 &amp; 0.5962 &amp; 60 \\
MSFT &amp; 0.0122 &amp; 0.0717 &amp; -0.114 &amp; 0.218 &amp; 0.3776 &amp; -0.0554 &amp; 60 \\
AMZN &amp; -0.0053 &amp; 0.1001 &amp; -0.205 &amp; 0.362 &amp; 0.7111 &amp; 2.1262 &amp; 60 \\
META &amp; -0.0034 &amp; 0.0653 &amp; -0.208 &amp; 0.128 &amp; -0.3151 &amp; 0.5115 &amp; 60 \\
\bottomrule
\end{tabular}
\end{table}
</code></pre>
</div>
</div>
</section>
<section id="customizing-latex-output" class="level3" data-number="18.5.3">
<h3 data-number="18.5.3" class="anchored" data-anchor-id="customizing-latex-output"><span class="header-section-number">18.5.3</span> Customizing LaTeX Output</h3>
<p>For publication-quality tables, you’ll want more control over the output:</p>
<div id="72c785ff" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> df_to_latex_table(df, caption, label, notes<span class="op">=</span><span class="va">None</span>, index<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert DataFrame to well-formatted LaTeX table.</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">    df : pd.DataFrame</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Data to convert</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">    caption : str</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Table caption</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">    label : str</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">        LaTeX label for referencing</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">    notes : str, optional</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">        Table notes to appear below table</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">    index : bool</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">        Whether to include DataFrame index</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co">    str</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co">        LaTeX table code</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start with pandas LaTeX conversion</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">=</span> df.to_latex(</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span>index,</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>        escape<span class="op">=</span><span class="va">False</span>,  <span class="co"># Allow LaTeX commands in data</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>        column_format<span class="op">=</span><span class="st">'l'</span> <span class="op">+</span> <span class="st">'c'</span> <span class="op">*</span> <span class="bu">len</span>(df.columns),  <span class="co"># Left-align first col, center rest</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>        position<span class="op">=</span><span class="st">'htbp'</span>,</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>        caption<span class="op">=</span>caption,</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>label</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Replace default rules with booktabs rules</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">=</span> latex.replace(<span class="st">'</span><span class="ch">\\</span><span class="st">toprule'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">toprule'</span>)</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">=</span> latex.replace(<span class="st">'</span><span class="ch">\\</span><span class="st">midrule'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">midrule'</span>)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">=</span> latex.replace(<span class="st">'</span><span class="ch">\\</span><span class="st">bottomrule'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">bottomrule'</span>)</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add table notes if provided</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> notes:</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Find the end of tabular environment</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>        tabular_end <span class="op">=</span> latex.find(<span class="st">'</span><span class="ch">\\</span><span class="st">end</span><span class="sc">{tabular}</span><span class="st">'</span>)</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> tabular_end <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>            notes_latex <span class="op">=</span> <span class="ss">f"</span><span class="ch">\n\\</span><span class="ss">begin</span><span class="ch">{{</span><span class="ss">tablenotes</span><span class="ch">}}\n\\</span><span class="ss">small</span><span class="ch">\n\\</span><span class="ss">item </span><span class="sc">{</span>notes<span class="sc">}</span><span class="ch">\n\\</span><span class="ss">end</span><span class="ch">{{</span><span class="ss">tablenotes</span><span class="ch">}}\n</span><span class="ss">"</span></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>            latex <span class="op">=</span> latex[:tabular_end <span class="op">+</span> <span class="bu">len</span>(<span class="st">'</span><span class="ch">\\</span><span class="st">end</span><span class="sc">{tabular}</span><span class="st">'</span>)] <span class="op">+</span> notes_latex <span class="op">+</span> latex[tabular_end <span class="op">+</span> <span class="bu">len</span>(<span class="st">'</span><span class="ch">\\</span><span class="st">end</span><span class="sc">{tabular}</span><span class="st">'</span>):]</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> latex</span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a nice LaTeX table</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>latex_table <span class="op">=</span> df_to_latex_table(</span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a>    formatted_stats,</span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a>    caption<span class="op">=</span><span class="st">'Summary Statistics for Monthly Stock Returns, 2019-2023'</span>,</span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">'tab:summary'</span>,</span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>    notes<span class="op">=</span><span class="st">'This table presents summary statistics for monthly returns of five major technology stocks. '</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>          <span class="st">'Returns are expressed as decimals. Sample period is January 2019 to December 2023.'</span>,</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="va">True</span></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(latex_table)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{table}[htbp]
\caption{Summary Statistics for Monthly Stock Returns, 2019-2023}
\label{tab:summary}
\begin{tabular}{lccccccc}
\toprule
 &amp; Mean &amp; Std Dev &amp; Min &amp; Max &amp; Skewness &amp; Kurtosis &amp; Obs \\
\midrule
AAPL &amp; -0.0155 &amp; 0.0883 &amp; -0.190 &amp; 0.182 &amp; 0.0714 &amp; -0.4109 &amp; 60 \\
GOOGL &amp; 0.0022 &amp; 0.0639 &amp; -0.174 &amp; 0.163 &amp; -0.1811 &amp; 0.5962 &amp; 60 \\
MSFT &amp; 0.0122 &amp; 0.0717 &amp; -0.114 &amp; 0.218 &amp; 0.3776 &amp; -0.0554 &amp; 60 \\
AMZN &amp; -0.0053 &amp; 0.1001 &amp; -0.205 &amp; 0.362 &amp; 0.7111 &amp; 2.1262 &amp; 60 \\
META &amp; -0.0034 &amp; 0.0653 &amp; -0.208 &amp; 0.128 &amp; -0.3151 &amp; 0.5115 &amp; 60 \\
\bottomrule
\end{tabular}
\begin{tablenotes}
\small
\item This table presents summary statistics for monthly returns of five major technology stocks. Returns are expressed as decimals. Sample period is January 2019 to December 2023.
\end{tablenotes}

\end{table}
</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>LaTeX Table Best Practices
</div>
</div>
<div class="callout-body-container callout-body">
<p>Follow these conventions for professional tables:</p>
<ol type="1">
<li><strong>Use booktabs package</strong>: Provides <code>\toprule</code>, <code>\midrule</code>, <code>\bottomrule</code> for clean horizontal lines</li>
<li><strong>Avoid vertical lines</strong>: Modern table design omits vertical separators</li>
<li><strong>Align numbers properly</strong>: Center or right-align numeric columns, left-align text</li>
<li><strong>Add informative notes</strong>: Explain variable definitions, sample restrictions, significance levels</li>
<li><strong>Use consistent precision</strong>: Don’t mix 2 and 4 decimal places randomly</li>
<li><strong>Include label</strong>: Always add <code>\label{}</code> so you can reference tables in text with <code>\ref{}</code></li>
</ol>
<p>In your LaTeX preamble, include:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">booktabs</span>}</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>{<span class="ex">threeparttable</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="creating-regression-tables-in-latex" class="level3" data-number="18.5.4">
<h3 data-number="18.5.4" class="anchored" data-anchor-id="creating-regression-tables-in-latex"><span class="header-section-number">18.5.4</span> Creating Regression Tables in LaTeX</h3>
<p>For regression tables, we want a specific format showing multiple models side-by-side:</p>
<div id="ef159bf3" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> regression_to_latex(models, model_names, caption, label,</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>                       dep_var_name<span class="op">=</span><span class="st">'Dependent Variable'</span>, notes<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Create publication-quality LaTeX regression table.</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">    models : list</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co">        List of fitted statsmodels results</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">    model_names : list</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co">        Names for each model column</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">    caption : str</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Table caption</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">    label : str</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co">        LaTeX label</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co">    dep_var_name : str</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co">        Name of dependent variable</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co">    notes : str, optional</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="co">        Table notes</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="co">    str</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="co">        LaTeX table code</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Collect all variables</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    all_vars <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> model <span class="kw">in</span> models:</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>        all_vars.update(model.params.index)</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    all_vars <span class="op">=</span> <span class="bu">sorted</span>(<span class="bu">list</span>(all_vars))</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start building LaTeX</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    n_models <span class="op">=</span> <span class="bu">len</span>(models)</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    col_spec <span class="op">=</span> <span class="st">'l'</span> <span class="op">+</span> <span class="st">'c'</span> <span class="op">*</span> n_models</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">=</span> <span class="ss">f"""</span><span class="ch">\\</span><span class="ss">begin</span><span class="ch">{{</span><span class="ss">table</span><span class="ch">}}</span><span class="ss">[htbp]</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">centering</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">caption</span><span class="ch">{{</span><span class="sc">{</span>caption<span class="sc">}</span><span class="ch">}}</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">label</span><span class="ch">{{</span><span class="sc">{</span>label<span class="sc">}</span><span class="ch">}}</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">begin</span><span class="ch">{{</span><span class="ss">tabular</span><span class="ch">}}{{</span><span class="sc">{</span>col_spec<span class="sc">}</span><span class="ch">}}</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">toprule</span></span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Header row</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="ss">f" &amp; "</span> <span class="op">+</span> <span class="st">" &amp; "</span>.join([<span class="ss">f"(</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">)"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_models)]) <span class="op">+</span> <span class="st">" </span><span class="ch">\\\\\n</span><span class="st">"</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="ss">f" &amp; "</span> <span class="op">+</span> <span class="st">" &amp; "</span>.join(model_names) <span class="op">+</span> <span class="st">" </span><span class="ch">\\\\\n</span><span class="st">"</span></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"</span><span class="ch">\\</span><span class="st">midrule</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Variable rows</span></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> all_vars:</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Variable name</span></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>        var_display <span class="op">=</span> var.replace(<span class="st">'_'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">_'</span>)  <span class="co"># Escape underscores for LaTeX</span></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="ss">f"</span><span class="sc">{</span>var_display<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Coefficients</span></span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> model <span class="kw">in</span> models:</span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> var <span class="kw">in</span> model.params:</span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>                coef <span class="op">=</span> model.params[var]</span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>                pval <span class="op">=</span> model.pvalues[var]</span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>                stars <span class="op">=</span> <span class="st">""</span></span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> pval <span class="op">&lt;</span> <span class="fl">0.01</span>:</span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>                    stars <span class="op">=</span> <span class="st">"^{***}"</span></span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>                <span class="cf">elif</span> pval <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>                    stars <span class="op">=</span> <span class="st">"^{**}"</span></span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>                <span class="cf">elif</span> pval <span class="op">&lt;</span> <span class="fl">0.10</span>:</span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>                    stars <span class="op">=</span> <span class="st">"^{*}"</span></span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>                latex <span class="op">+=</span> <span class="ss">f" &amp; $</span><span class="sc">{</span>coef<span class="sc">:.4f}{</span>stars<span class="sc">}</span><span class="ss">$"</span></span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a>                latex <span class="op">+=</span> <span class="st">" &amp; "</span></span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="st">" </span><span class="ch">\\\\\n</span><span class="st">"</span></span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Standard errors</span></span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="st">" "</span></span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> model <span class="kw">in</span> models:</span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> var <span class="kw">in</span> model.params:</span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>                se <span class="op">=</span> model.bse[var]</span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>                latex <span class="op">+=</span> <span class="ss">f" &amp; $(</span><span class="sc">{</span>se<span class="sc">:.4f}</span><span class="ss">)$"</span></span>
<span id="cb27-78"><a href="#cb27-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb27-79"><a href="#cb27-79" aria-hidden="true" tabindex="-1"></a>                latex <span class="op">+=</span> <span class="st">" &amp; "</span></span>
<span id="cb27-80"><a href="#cb27-80" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="st">" </span><span class="ch">\\\\\n</span><span class="st">"</span></span>
<span id="cb27-81"><a href="#cb27-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-82"><a href="#cb27-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Model statistics</span></span>
<span id="cb27-83"><a href="#cb27-83" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"</span><span class="ch">\\</span><span class="st">midrule</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb27-84"><a href="#cb27-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-85"><a href="#cb27-85" aria-hidden="true" tabindex="-1"></a>    <span class="co"># R-squared</span></span>
<span id="cb27-86"><a href="#cb27-86" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"R-squared"</span></span>
<span id="cb27-87"><a href="#cb27-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> model <span class="kw">in</span> models:</span>
<span id="cb27-88"><a href="#cb27-88" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="ss">f" &amp; $</span><span class="sc">{</span>model<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">$"</span></span>
<span id="cb27-89"><a href="#cb27-89" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">" </span><span class="ch">\\\\\n</span><span class="st">"</span></span>
<span id="cb27-90"><a href="#cb27-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-91"><a href="#cb27-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Observations</span></span>
<span id="cb27-92"><a href="#cb27-92" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"Observations"</span></span>
<span id="cb27-93"><a href="#cb27-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> model <span class="kw">in</span> models:</span>
<span id="cb27-94"><a href="#cb27-94" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="ss">f" &amp; $</span><span class="sc">{</span><span class="bu">int</span>(model.nobs)<span class="sc">}</span><span class="ss">$"</span></span>
<span id="cb27-95"><a href="#cb27-95" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">" </span><span class="ch">\\\\\n</span><span class="st">"</span></span>
<span id="cb27-96"><a href="#cb27-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-97"><a href="#cb27-97" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"</span><span class="ch">\\</span><span class="st">bottomrule</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb27-98"><a href="#cb27-98" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"</span><span class="ch">\\</span><span class="st">end</span><span class="sc">{tabular}</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb27-99"><a href="#cb27-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-100"><a href="#cb27-100" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add notes</span></span>
<span id="cb27-101"><a href="#cb27-101" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> notes:</span>
<span id="cb27-102"><a href="#cb27-102" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">+=</span> <span class="ss">f"""</span><span class="ch">\\</span><span class="ss">begin</span><span class="ch">{{</span><span class="ss">tablenotes</span><span class="ch">}}</span></span>
<span id="cb27-103"><a href="#cb27-103" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">small</span></span>
<span id="cb27-104"><a href="#cb27-104" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">item </span><span class="ch">\\</span><span class="ss">textit</span><span class="ch">{{</span><span class="ss">Notes:</span><span class="ch">}}</span><span class="ss"> </span><span class="sc">{</span>notes<span class="sc">}</span></span>
<span id="cb27-105"><a href="#cb27-105" aria-hidden="true" tabindex="-1"></a><span class="ch">\\</span><span class="ss">end</span><span class="ch">{{</span><span class="ss">tablenotes</span><span class="ch">}}</span></span>
<span id="cb27-106"><a href="#cb27-106" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span>
<span id="cb27-107"><a href="#cb27-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-108"><a href="#cb27-108" aria-hidden="true" tabindex="-1"></a>    latex <span class="op">+=</span> <span class="st">"</span><span class="ch">\\</span><span class="st">end</span><span class="sc">{table}</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb27-109"><a href="#cb27-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-110"><a href="#cb27-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> latex</span>
<span id="cb27-111"><a href="#cb27-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-112"><a href="#cb27-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate LaTeX regression table</span></span>
<span id="cb27-113"><a href="#cb27-113" aria-hidden="true" tabindex="-1"></a>reg_latex <span class="op">=</span> regression_to_latex(</span>
<span id="cb27-114"><a href="#cb27-114" aria-hidden="true" tabindex="-1"></a>    models<span class="op">=</span>[model1, model2],</span>
<span id="cb27-115"><a href="#cb27-115" aria-hidden="true" tabindex="-1"></a>    model_names<span class="op">=</span>[<span class="st">'Base Model'</span>, <span class="st">'Full Model'</span>],</span>
<span id="cb27-116"><a href="#cb27-116" aria-hidden="true" tabindex="-1"></a>    caption<span class="op">=</span><span class="st">'Determinants of Stock Returns'</span>,</span>
<span id="cb27-117"><a href="#cb27-117" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">'tab:regressions'</span>,</span>
<span id="cb27-118"><a href="#cb27-118" aria-hidden="true" tabindex="-1"></a>    dep_var_name<span class="op">=</span><span class="st">'Returns'</span>,</span>
<span id="cb27-119"><a href="#cb27-119" aria-hidden="true" tabindex="-1"></a>    notes<span class="op">=</span><span class="st">'This table presents OLS regression results. The dependent variable is monthly stock returns. '</span></span>
<span id="cb27-120"><a href="#cb27-120" aria-hidden="true" tabindex="-1"></a>          <span class="st">'Standard errors are shown in parentheses. '</span></span>
<span id="cb27-121"><a href="#cb27-121" aria-hidden="true" tabindex="-1"></a>          <span class="st">'*, **, and *** denote significance at the 10</span><span class="ch">\\</span><span class="st">%, 5</span><span class="ch">\\</span><span class="st">%, and 1</span><span class="ch">\\</span><span class="sc">% le</span><span class="st">vels, respectively.'</span></span>
<span id="cb27-122"><a href="#cb27-122" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-123"><a href="#cb27-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-124"><a href="#cb27-124" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(reg_latex)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{table}[htbp]
\centering
\caption{Determinants of Stock Returns}
\label{tab:regressions}
\begin{tabular}{lcc}
\toprule
 &amp; (1) &amp; (2) \\
 &amp; Base Model &amp; Full Model \\
\midrule
book\_to\_market &amp;  &amp; $-0.0005$ \\
  &amp;  &amp; $(0.0031)$ \\
const &amp; $0.0035$ &amp; $0.0041$ \\
  &amp; $(0.0107)$ &amp; $(0.0113)$ \\
log\_market\_cap &amp; $0.0007$ &amp; $0.0007$ \\
  &amp; $(0.0010)$ &amp; $(0.0010)$ \\
\midrule
R-squared &amp; $0.0007$ &amp; $0.0007$ \\
Observations &amp; $600$ &amp; $600$ \\
\bottomrule
\end{tabular}
\begin{tablenotes}
\small
\item \textit{Notes:} This table presents OLS regression results. The dependent variable is monthly stock returns. Standard errors are shown in parentheses. *, **, and *** denote significance at the 10\%, 5\%, and 1\% levels, respectively.
\end{tablenotes}
\end{table}
</code></pre>
</div>
</div>
</section>
<section id="saving-tables-to-files" class="level3" data-number="18.5.5">
<h3 data-number="18.5.5" class="anchored" data-anchor-id="saving-tables-to-files"><span class="header-section-number">18.5.5</span> Saving Tables to Files</h3>
<p>In practice, you’ll want to save your LaTeX tables to files for inclusion in your paper:</p>
<div id="818eec8a" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_latex_table(latex_string, filename):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Save LaTeX table to file.</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co">    latex_string : str</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co">        LaTeX table code</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">    filename : str</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Output filename (should end in .tex)</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        f.write(latex_string)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Table saved to </span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Example (not actually saving to avoid creating files in this tutorial)</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># save_latex_table(reg_latex, 'tables/regression_results.tex')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>In your LaTeX document, you would then include the table with:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\input</span>{tables/regression_results.tex}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Workflow for Managing Tables
</div>
</div>
<div class="callout-body-container callout-body">
<p>A recommended workflow for research papers:</p>
<ol type="1">
<li><strong>Generate all tables in Python</strong>: Keep table generation code in well-organized scripts</li>
<li><strong>Export to .tex files</strong>: Save each table to a separate file in a <code>tables/</code> directory</li>
<li><strong>Include in main document</strong>: Use <code>\input{}</code> to include tables in your paper</li>
<li><strong>Automate updates</strong>: When data or specifications change, re-run Python scripts to update all tables</li>
</ol>
<p>This separation keeps your main LaTeX document clean and makes it easy to update tables as your research evolves.</p>
</div>
</div>
</section>
<section id="using-stargazer-for-latex-output" class="level3" data-number="18.5.6">
<h3 data-number="18.5.6" class="anchored" data-anchor-id="using-stargazer-for-latex-output"><span class="header-section-number">18.5.6</span> Using stargazer for LaTeX Output</h3>
<p>Returning to stargazer, it can directly generate LaTeX output:</p>
<div id="c7b3d1d1" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create stargazer table with LaTeX output</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>stargazer_latex <span class="op">=</span> Stargazer([model1, model2])</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure output</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>stargazer_latex.title(<span class="st">'Determinants of Stock Returns'</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>stargazer_latex.show_model_numbers(<span class="va">True</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>stargazer_latex.custom_columns([<span class="st">'Base Model'</span>, <span class="st">'Full Model'</span>], [<span class="dv">1</span>, <span class="dv">1</span>])</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Get LaTeX code</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stargazer_latex.render_latex())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>\begin{table}[!htbp] \centering
  \caption{Determinants of Stock Returns}
\begin{tabular}{@{\extracolsep{5pt}}lcc}
\\[-1.8ex]\hline
\hline \\[-1.8ex]
&amp; \multicolumn{2}{c}{\textit{Dependent variable: returns}} \
\cr \cline{2-3}
\\[-1.8ex] &amp; \multicolumn{1}{c}{Base Model} &amp; \multicolumn{1}{c}{Full Model}  \\
\\[-1.8ex] &amp; (1) &amp; (2) \\
\hline \\[-1.8ex]
 book_to_market &amp; &amp; -0.001$^{}$ \\
&amp; &amp; (0.003) \\
 const &amp; 0.003$^{}$ &amp; 0.004$^{}$ \\
&amp; (0.011) &amp; (0.011) \\
 log_market_cap &amp; 0.001$^{}$ &amp; 0.001$^{}$ \\
&amp; (0.001) &amp; (0.001) \\
\hline \\[-1.8ex]
 Observations &amp; 600 &amp; 600 \\
 $R^2$ &amp; 0.001 &amp; 0.001 \\
 Adjusted $R^2$ &amp; -0.001 &amp; -0.003 \\
 Residual Std. Error &amp; 0.050 (df=598) &amp; 0.050 (df=597) \\
 F Statistic &amp; 0.408$^{}$ (df=1; 598) &amp; 0.217$^{}$ (df=2; 597) \\
\hline
\hline \\[-1.8ex]
\textit{Note:} &amp; \multicolumn{2}{r}{$^{*}$p$&lt;$0.1; $^{**}$p$&lt;$0.05; $^{***}$p$&lt;$0.01} \\
\end{tabular}
\end{table}</code></pre>
</div>
</div>
<p>stargazer handles many formatting details automatically and is particularly good at managing multiple model specifications.</p>
</section>
</section>
<section id="advanced-topics-and-best-practices" class="level2" data-number="18.6">
<h2 data-number="18.6" class="anchored" data-anchor-id="advanced-topics-and-best-practices"><span class="header-section-number">18.6</span> Advanced Topics and Best Practices</h2>
<section id="panel-data-tables-with-fixed-effects" class="level3" data-number="18.6.1">
<h3 data-number="18.6.1" class="anchored" data-anchor-id="panel-data-tables-with-fixed-effects"><span class="header-section-number">18.6.1</span> Panel Data Tables with Fixed Effects</h3>
<p>When presenting panel regression results, clearly indicate which fixed effects are included:</p>
<div id="694f1560" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of documenting fixed effects in table</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_fixed_effects_rows(models, fe_dict):</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Add fixed effects indicator rows to regression table.</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">    models : list</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">        List of model results</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">    fe_dict : dict</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">        Dictionary mapping model index to dict of FE types</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co">        Example: {0: {'Firm FE': False, 'Year FE': False},</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co">                  1: {'Firm FE': True, 'Year FE': False}}</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="co">        Fixed effects indicator table</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    fe_types <span class="op">=</span> <span class="bu">list</span>(fe_dict[<span class="dv">0</span>].keys())</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> []</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> fe_type <span class="kw">in</span> fe_types:</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>        row <span class="op">=</span> {<span class="st">'Fixed Effect'</span>: fe_type}</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(models)):</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>            row[<span class="ss">f'Model </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">'</span>] <span class="op">=</span> <span class="st">'Yes'</span> <span class="cf">if</span> fe_dict[i][fe_type] <span class="cf">else</span> <span class="st">'No'</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>        data.append(row)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(data)</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Example fixed effects table</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>fe_indicators <span class="op">=</span> add_fixed_effects_rows(</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    models<span class="op">=</span>[model1, model2, model3],</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>    fe_dict<span class="op">=</span>{</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>        <span class="dv">0</span>: {<span class="st">'Firm FE'</span>: <span class="va">False</span>, <span class="st">'Year FE'</span>: <span class="va">False</span>},</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span>: {<span class="st">'Firm FE'</span>: <span class="va">False</span>, <span class="st">'Year FE'</span>: <span class="va">False</span>},</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span>: {<span class="st">'Firm FE'</span>: <span class="va">True</span>, <span class="st">'Year FE'</span>: <span class="va">False</span>}</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>fe_indicators</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Fixed Effect</th>
<th data-quarto-table-cell-role="th">Model 1</th>
<th data-quarto-table-cell-role="th">Model 2</th>
<th data-quarto-table-cell-role="th">Model 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Firm FE</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Year FE</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="combining-summary-statistics-and-tests" class="level3" data-number="18.6.2">
<h3 data-number="18.6.2" class="anchored" data-anchor-id="combining-summary-statistics-and-tests"><span class="header-section-number">18.6.2</span> Combining Summary Statistics and Tests</h3>
<p>For treatment effect studies, you often want to combine summary statistics with balance tests:</p>
<div id="5ea4bf33" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_balance_table(df, treatment_col, variables, control_name<span class="op">=</span><span class="st">'Control'</span>,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                        treatment_name<span class="op">=</span><span class="st">'Treatment'</span>):</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Create a balance table showing pre-treatment differences.</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">    df : pd.DataFrame</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">        Dataset with treatment indicator</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">    treatment_col : str</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">        Name of treatment column (binary)</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">    variables : list</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Variables to compare</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co">    control_name : str</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="co">        Label for control group</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co">    treatment_name : str</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="co">        Label for treatment group</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="co">        Balance table with means and difference tests</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> []</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> variables:</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>        control_data <span class="op">=</span> df[df[treatment_col] <span class="op">==</span> <span class="dv">0</span>][var].dropna()</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>        treatment_data <span class="op">=</span> df[df[treatment_col] <span class="op">==</span> <span class="dv">1</span>][var].dropna()</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>        control_mean <span class="op">=</span> control_data.mean()</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>        treatment_mean <span class="op">=</span> treatment_data.mean()</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>        t_stat, p_val <span class="op">=</span> scipy_stats.ttest_ind(control_data, treatment_data)</span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>        results.append({</span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Variable'</span>: var,</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f'</span><span class="sc">{</span>control_name<span class="sc">}</span><span class="ss"> Mean'</span>: <span class="ss">f'</span><span class="sc">{</span>control_mean<span class="sc">:.3f}</span><span class="ss">'</span>,</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f'</span><span class="sc">{</span>treatment_name<span class="sc">}</span><span class="ss"> Mean'</span>: <span class="ss">f'</span><span class="sc">{</span>treatment_mean<span class="sc">:.3f}</span><span class="ss">'</span>,</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Difference'</span>: <span class="ss">f'</span><span class="sc">{</span>treatment_mean <span class="op">-</span> control_mean<span class="sc">:.3f}</span><span class="ss">'</span>,</span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">'t-statistic'</span>: <span class="ss">f'</span><span class="sc">{</span>t_stat<span class="sc">:.3f}</span><span class="ss">'</span>,</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>            <span class="st">'p-value'</span>: <span class="ss">f'</span><span class="sc">{</span>p_val<span class="sc">:.3f}</span><span class="ss">'</span></span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(results)</span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Example (creating artificial treatment variable)</span></span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>panel_df[<span class="st">'treatment'</span>] <span class="op">=</span> (panel_df[<span class="st">'firm_id'</span>] <span class="op">&lt;=</span> <span class="dv">5</span>).astype(<span class="bu">int</span>)</span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>balance_table <span class="op">=</span> create_balance_table(</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>    panel_df,</span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">'treatment'</span>,</span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'returns'</span>, <span class="st">'log_market_cap'</span>, <span class="st">'book_to_market'</span>],</span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>    control_name<span class="op">=</span><span class="st">'Control Firms'</span>,</span>
<span id="cb34-54"><a href="#cb34-54" aria-hidden="true" tabindex="-1"></a>    treatment_name<span class="op">=</span><span class="st">'Treatment Firms'</span></span>
<span id="cb34-55"><a href="#cb34-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-56"><a href="#cb34-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-57"><a href="#cb34-57" aria-hidden="true" tabindex="-1"></a>balance_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Control Firms Mean</th>
<th data-quarto-table-cell-role="th">Treatment Firms Mean</th>
<th data-quarto-table-cell-role="th">Difference</th>
<th data-quarto-table-cell-role="th">t-statistic</th>
<th data-quarto-table-cell-role="th">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>returns</td>
<td>0.013</td>
<td>0.008</td>
<td>-0.005</td>
<td>1.178</td>
<td>0.239</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>log_market_cap</td>
<td>10.054</td>
<td>10.078</td>
<td>0.024</td>
<td>-0.150</td>
<td>0.880</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>book_to_market</td>
<td>0.986</td>
<td>0.987</td>
<td>0.002</td>
<td>-0.029</td>
<td>0.977</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="journal-specific-formatting" class="level3" data-number="18.6.3">
<h3 data-number="18.6.3" class="anchored" data-anchor-id="journal-specific-formatting"><span class="header-section-number">18.6.3</span> Journal-Specific Formatting</h3>
<p>Different journals have different table formatting requirements. Here are some common variations:</p>
<div id="1bac1f68" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Compact format vs. spacious format</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> format_for_journal(df, journal_style<span class="op">=</span><span class="st">'compact'</span>):</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Format table according to journal requirements.</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">    df : pd.DataFrame</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">        Table to format</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">    journal_style : str</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">        'compact' for journals with page limits, 'spacious' for others</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">    str</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">        Formatted LaTeX code</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> journal_style <span class="op">==</span> <span class="st">'compact'</span>:</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Use smaller font, tighter spacing</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">=</span> df.to_latex(index<span class="op">=</span><span class="va">True</span>, escape<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">=</span> <span class="st">"</span><span class="ch">\\</span><span class="st">small</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> latex</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">=</span> latex.replace(<span class="st">"</span><span class="ch">\\</span><span class="st">begin</span><span class="sc">{tabular}</span><span class="st">"</span>,</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"</span><span class="ch">\\</span><span class="st">begin</span><span class="sc">{tabular}</span><span class="st">[t]"</span>)</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Standard format with more spacing</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>        latex <span class="op">=</span> df.to_latex(index<span class="op">=</span><span class="va">True</span>, escape<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> latex</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Compact version for journals with strict page limits</span></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>compact_table <span class="op">=</span> format_for_journal(formatted_stats, journal_style<span class="op">=</span><span class="st">'compact'</span>)</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Compact format:"</span>)</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(compact_table[:<span class="dv">300</span>])  <span class="co"># Show first 300 characters</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Compact format:
\small
\begin{tabular}[t]{lllllllr}
\toprule
 &amp; Mean &amp; Std Dev &amp; Min &amp; Max &amp; Skewness &amp; Kurtosis &amp; Obs \\
\midrule
AAPL &amp; -0.0155 &amp; 0.0883 &amp; -0.190 &amp; 0.182 &amp; 0.0714 &amp; -0.4109 &amp; 60 \\
GOOGL &amp; 0.0022 &amp; 0.0639 &amp; -0.174 &amp; 0.163 &amp; -0.1811 &amp; 0.5962 &amp; 60 \\
MSFT &amp; 0.0122 &amp; 0.0717 &amp; -0.114 &amp; 0.218 &amp; 0.3776 </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Check Journal Guidelines
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before finalizing your tables:</p>
<ol type="1">
<li><strong>Review recent papers</strong> in your target journal to see their table style</li>
<li><strong>Check submission guidelines</strong> for specific requirements on:
<ul>
<li>Font sizes</li>
<li>Table placement (in-text vs.&nbsp;end of document)</li>
<li>File formats accepted (.tex, .pdf, etc.)</li>
<li>Maximum table width</li>
</ul></li>
<li><strong>Note any requirements</strong> about:
<ul>
<li>Significance levels to report</li>
<li>Decimal places for different statistics</li>
<li>Required model diagnostics</li>
<li>Footnote formatting</li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="summary-and-best-practices" class="level2" data-number="18.7">
<h2 data-number="18.7" class="anchored" data-anchor-id="summary-and-best-practices"><span class="header-section-number">18.7</span> Summary and Best Practices</h2>
<section id="key-takeaways" class="level3" data-number="18.7.1">
<h3 data-number="18.7.1" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">18.7.1</span> Key Takeaways</h3>
<ol type="1">
<li><strong>Summary statistics tables</strong> should present central tendency, dispersion, and relevant distributional properties of your data</li>
<li><strong>Regression tables</strong> must clearly show coefficients, standard errors (or t-statistics), significance levels, and model fit statistics</li>
<li><strong>LaTeX export</strong> is essential for academic publishing; pandas provides basic functionality, but custom functions or stargazer offer more control</li>
<li><strong>Formatting consistency</strong> across all tables in a paper is crucial for professionalism</li>
<li><strong>Documentation</strong> in table notes should explain variable definitions, sample restrictions, and statistical methods</li>
</ol>
</section>
<section id="checklist-for-publication-quality-tables" class="level3" data-number="18.7.2">
<h3 data-number="18.7.2" class="anchored" data-anchor-id="checklist-for-publication-quality-tables"><span class="header-section-number">18.7.2</span> Checklist for Publication-Quality Tables</h3>
<p>Before submitting tables in a paper, verify:</p>
<ul class="task-list">
<li><label><input type="checkbox">All numbers formatted with appropriate precision</label></li>
<li><label><input type="checkbox">Significance stars (if used) are explained in notes</label></li>
<li><label><input type="checkbox">Standard errors are clearly marked (parentheses convention)</label></li>
<li><label><input type="checkbox">Variable names are descriptive and properly formatted</label></li>
<li><label><input type="checkbox">Sample sizes are reported</label></li>
<li><label><input type="checkbox">Table notes explain key details about data and methods</label></li>
<li><label><input type="checkbox">Fixed effects and clustering (if used) are documented</label></li>
<li><label><input type="checkbox">Tables are referenced in the text with correct labels</label></li>
<li><label><input type="checkbox">LaTeX code compiles without errors</label></li>
<li><label><input type="checkbox">Format matches target journal’s style</label></li>
</ul>
</section>
<section id="common-pitfalls-to-avoid" class="level3" data-number="18.7.3">
<h3 data-number="18.7.3" class="anchored" data-anchor-id="common-pitfalls-to-avoid"><span class="header-section-number">18.7.3</span> Common Pitfalls to Avoid</h3>
<ol type="1">
<li><strong>Too many decimal places</strong>: Don’t report spurious precision</li>
<li><strong>Missing standard errors</strong>: Always report uncertainty measures</li>
<li><strong>Unclear variable names</strong>: Use descriptive labels, not raw column names</li>
<li><strong>No table notes</strong>: Readers need context about your methods and data</li>
<li><strong>Inconsistent formatting</strong>: All tables in a paper should follow the same style</li>
<li><strong>Missing model statistics</strong>: R-squared and sample size are almost always required</li>
<li><strong>Overly wide tables</strong>: Consider splitting or transposing tables that don’t fit on a page</li>
</ol>
</section>
<section id="recommended-workflow" class="level3" data-number="18.7.4">
<h3 data-number="18.7.4" class="anchored" data-anchor-id="recommended-workflow"><span class="header-section-number">18.7.4</span> Recommended Workflow</h3>
<p>For efficient table production:</p>
<ol type="1">
<li><strong>Develop template functions</strong> for your common table types (summary stats, regressions, etc.)</li>
<li><strong>Store table generation code</strong> in organized scripts (e.g., <code>make_tables.py</code>)</li>
<li><strong>Automate export</strong> to both LaTeX and human-readable formats (HTML, CSV)</li>
<li><strong>Version control</strong> your table code alongside your analysis code</li>
<li><strong>Create a tables directory</strong> in your project for .tex files</li>
<li><strong>Document your code</strong> so you can reproduce tables months later</li>
<li><strong>Test LaTeX output</strong> by compiling early and often</li>
</ol>
</section>
</section>
<section id="additional-resources" class="level2" data-number="18.8">
<h2 data-number="18.8" class="anchored" data-anchor-id="additional-resources"><span class="header-section-number">18.8</span> Additional Resources</h2>
<p>For further learning about creating research tables:</p>
<ul>
<li><a href="https://pandas.pydata.org/docs/user_guide/style.html">pandas documentation on styling</a></li>
<li><a href="https://www.statsmodels.org/stable/regression.html">statsmodels regression output documentation</a></li>
<li><a href="https://pypi.org/project/stargazer/">stargazer package on PyPI</a></li>
<li><a href="https://ctan.org/pkg/booktabs">LaTeX booktabs package documentation</a></li>
<li><a href="https://www.edwardtufte.com/tufte/books_vdqi">The Visual Display of Quantitative Information</a> by Edward Tufte</li>
<li><a href="https://www.cambridge.org/core/journals/journal-of-financial-and-quantitative-analysis/information/instructions-contributors">Guidelines for Better Tables in Finance</a> from JFQA</li>
</ul>
<section id="example-papers-with-excellent-tables" class="level3" data-number="18.8.1">
<h3 data-number="18.8.1" class="anchored" data-anchor-id="example-papers-with-excellent-tables"><span class="header-section-number">18.8.1</span> Example Papers with Excellent Tables</h3>
<p>Study tables in these highly-cited finance papers:</p>
<ul>
<li>Fama and French (1993) - “Common Risk Factors in the Returns on Stocks and Bonds”</li>
<li>Amihud (2002) - “Illiquidity and Stock Returns”</li>
<li>Petersen (2009) - “Estimating Standard Errors in Finance Panel Data Sets”</li>
</ul>
<p>These papers exemplify clear table presentation that effectively communicates empirical findings.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../data-analysis/visualization/index.html" class="pagination-link" aria-label="Data Visualization">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Visualization</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../data-analysis/quarto/index.html" class="pagination-link" aria-label="Reproducible Documents with Quarto">
        <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reproducible Documents with Quarto</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://vincentgregoire.com">
<p>© 2026 Vincent Grégoire</p>
</a>
  </li>  
    <li class="nav-item">
  - 
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">
<p>Licensed under CC BY-NC-ND 4.0</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>